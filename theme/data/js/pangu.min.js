!function(u){"use strict";function f(u){for(var f=u.parentNode;f&&f.nodeName&&-1===f.nodeName.search(/^(html|head|body|#document)$/i);){if("true"===f.getAttribute("contenteditable")||"true"===f.getAttribute("g_editable")||f.nodeName.search(r)>=0)return!0;f=f.parentNode}return!1}function e(u,f){for(var e=u.childNodes,a=0;a<e.length;a++){var t=e[a];if(8!==t.nodeType&&t.textContent)return t===f}}function a(u,f){for(var e=u.childNodes,a=e.length-1;a>-1;a--){var t=e[a];if(8!==t.nodeType&&t.textContent)return t===f}}function t(u){var f,e=u;return u=u.replace(/([\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])(["])/gi,"$1 $2"),u=u.replace(/(["])([\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])/gi,"$1 $2"),u=u.replace(/(["'\(\[\{<\u201c]+)(\s*)(.+?)(\s*)(["'\)\]\}>\u201d]+)/gi,"$1$3$5"),u=u.replace(/([\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])( )(')([a-z])/gi,"$1$3$4"),u=u.replace(/([\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])(#(\S+))/gi,"$1 $2"),u=u.replace(/((\S+)#)([\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])/gi,"$1 $3"),u=u.replace(/([\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])([\+\-\*\/=&\\|<>])([a-z0-9])/gi,"$1 $2 $3"),u=u.replace(/([a-z0-9])([\+\-\*\/=&\\|<>])([\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])/gi,"$1 $2 $3"),e=u,f=e.replace(/([\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])([\(\[\{<\u201c]+(.*?)[\)\]\}>\u201d]+)([\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])/gi,"$1 $2 $4"),u=f,e===f&&(u=u.replace(/([\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])([\(\[\{<\u201c>])/gi,"$1 $2"),u=u.replace(/([\)\]\}>\u201d<])([\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])/gi,"$1 $2")),u=u.replace(/([\(\[\{<\u201c]+)(\s*)(.+?)(\s*)([\)\]\}>\u201d]+)/gi,"$1$3$5"),u=u.replace(/([\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])([~!;:,\.\?\u2026])([a-z0-9])/gi,"$1$2 $3"),u=u.replace(/([\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])([a-z0-9`\$%\^&\*\-=\+\\\|/@\u00a1-\u00ff\u2022\u2027\u2150-\u218f])/gi,"$1 $2"),u=u.replace(/([a-z0-9`~\$%\^&\*\-=\+\\\|/!;:,\.\?\u00a1-\u00ff\u2022\u2026\u2027\u2150-\u218f])([\u2e80-\u2eff\u2f00-\u2fdf\u3040-\u309f\u30a0-\u30ff\u3100-\u312f\u3200-\u32ff\u3400-\u4dbf\u4e00-\u9fff\uf900-\ufaff])/gi,"$1 $2")}function n(u,n){n=n||document;for(var c,s=!1,l=document.evaluate(u,n,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),p=l.snapshotLength,g=p-1;g>-1;--g){var $=l.snapshotItem(g);if(f($))c=$;else{var h=t($.data);if($.data!==h&&(s=!0,$.data=h),c){if($.nextSibling&&$.nextSibling.nodeName.search(d)>=0){c=$;continue}var b=$.data.toString().substr(-1)+c.data.toString().substr(0,1),m=t(b);if(b!==m){s=!0;for(var v=c;v.parentNode&&-1===v.nodeName.search(i)&&e(v.parentNode,v);)v=v.parentNode;for(var N=$;N.parentNode&&-1===N.nodeName.search(i)&&a(N.parentNode,N);)N=N.parentNode;if(N.nextSibling&&N.nextSibling.nodeName.search(d)>=0){c=$;continue}if(-1===N.nodeName.search(o))if(-1===v.nodeName.search(i))-1===v.nodeName.search(r)&&-1===v.nodeName.search(o)&&(c.previousSibling?-1===c.previousSibling.nodeName.search(d)&&(c.data=" "+c.data):f(c)||(c.data=" "+c.data));else if(-1===N.nodeName.search(i))$.data=$.data+" ";else{var x=document.createElement("pangu");x.innerHTML=" ",v.previousSibling?-1===v.previousSibling.nodeName.search(d)&&v.parentNode.insertBefore(x,v):v.parentNode.insertBefore(x,v),x.previousElementSibling||x.parentNode&&x.parentNode.removeChild(x)}}}c=$}}return s}var r=/^(code|pre|textarea)$/i,i=/^(a|del|pre|s|strike|u)$/i,d=/^(br|hr|i|img|pangu)$/i,o=/^(div|h1|h2|h3|h4|h5|h6|p)$/i;u.text_spacing=function(u){return t(u)},u.page_title_spacing=function(){var u="/html/head/title/text()",f=n(u);return f},u.page_spacing=function(){var f=u.page_title_spacing(),e="/html/body//*/text()[normalize-space(.)]";["script","style","textarea"].forEach(function(u){e+='[translate(name(..),"ABCDEFGHIJKLMNOPQRSTUVWXYZ","abcdefghijklmnopqrstuvwxyz")!="'+u+'"]'});var a=n(e);return f||a},u.node_spacing=function(u){var f=".//*/text()[normalize-space(.)]";["script","style","textarea"].forEach(function(u){f+='[translate(name(..),"ABCDEFGHIJKLMNOPQRSTUVWXYZ","abcdefghijklmnopqrstuvwxyz")!="'+u+'"]'});var e=n(f,u);return e},u.element_spacing=function(u){var f;if(0===u.indexOf("#")){var e=u.slice(1);f='id("'+e+'")//text()'}else if(0===u.indexOf(".")){var a=u.slice(1);f='//*[contains(concat(" ", normalize-space(@class), " "), "'+a+'")]//text()'}else{var t=u;f="//"+t+"//text()"}var r=n(f);return r}}(window.pangu=window.pangu||{});